name: Opensource Demo Orangehrmlive Test
on:
  push:
  workflow_dispatch:
  pull_request:
    branches: [ main ]

jobs:
  login-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/setup-playwright
      - name: Run Playwright tests (@login)
        run: npm run test -- --grep @login
      - uses: ./.github/actions/upload-reports.yml
        with:
          html_path: playwright-report/
          allure_results_path: allure-results
          allure_output_path: allure-report
          tag: login

  admin-search-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/setup-playwright
      - name: Run Playwright tests (@admin)
        run: npm run test -- --grep @admin
      - uses: ./.github/actions/upload-reports
        with:
          html_path: playwright-report/
          allure_results_path: allure-results
          allure_output_path: allure-report
          tag: admin
